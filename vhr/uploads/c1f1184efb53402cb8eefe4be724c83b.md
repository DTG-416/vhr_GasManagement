# å¾®äººäº‹éƒ¨ç½²

"D:\Program_code_files\SoftWare\vhr\vhr\vhrserver\vhr-web\src\main\resources\application.yml"

"D:\Program_code_files\SoftWare\vhr\vhr\mailserver\src\main\resources\application.properties"

è¿™äº›é…ç½®æ˜¯ Spring Boot åº”ç”¨ç¨‹åºçš„ `application.properties` æ–‡ä»¶ä¸­çš„é…ç½®é¡¹ï¼Œå®ƒä»¬æ¶‰åŠåˆ°å¤šç§æœåŠ¡çš„é…ç½®ï¼Œä¾‹å¦‚é‚®ä»¶æœåŠ¡ã€RabbitMQã€Redisã€ä»¥åŠæœåŠ¡å™¨ç«¯å£è®¾ç½®ã€‚ä»¥ä¸‹æ˜¯å¯¹æ¯ä¸€è¡Œé…ç½®çš„è¯¦ç»†è§£é‡Šï¼š

### 1. **Server Configuration**

```properties
server.port=8082
```

- **ä½œç”¨**ï¼šè®¾ç½® Spring Boot åº”ç”¨çš„ HTTP æœåŠ¡å™¨çš„ç«¯å£å·ã€‚è¿™é‡Œçš„é…ç½®æ˜¯å°†åº”ç”¨ç¨‹åºçš„ç«¯å£è®¾ç½®ä¸º `8082`ï¼Œé»˜è®¤æƒ…å†µä¸‹ Spring Boot åº”ç”¨ä½¿ç”¨ `8080` ç«¯å£ã€‚

### 2. **Email Configuration (SMTP)**

```properties
spring.mail.host=smtp.qq.com
```

- **ä½œç”¨**ï¼šè®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å™¨çš„ä¸»æœºåœ°å€ã€‚è¿™é‡Œæ˜¯é…ç½®äº† QQ é‚®ç®±çš„ SMTP æœåŠ¡å™¨åœ°å€ `smtp.qq.com`ï¼Œç”¨äºå‘é€é‚®ä»¶ã€‚

```properties
spring.mail.protocol=smtp
```

- **ä½œç”¨**ï¼šè®¾ç½®é‚®ä»¶åè®®ã€‚è¿™é‡Œé…ç½®ä½¿ç”¨ `SMTP`ï¼ˆSimple Mail Transfer Protocolï¼‰ï¼ŒSMTP æ˜¯ç”¨äºå‘é€ç”µå­é‚®ä»¶çš„æ ‡å‡†åè®®ã€‚

```properties
spring.mail.default-encoding=UTF-8
```

- **ä½œç”¨**ï¼šè®¾ç½®é‚®ä»¶çš„é»˜è®¤ç¼–ç ä¸º `UTF-8`ï¼Œä¿è¯é‚®ä»¶å†…å®¹çš„å­—ç¬¦ç¼–ç æ­£ç¡®ï¼Œå°¤å…¶æ˜¯åœ¨å‘é€éè‹±æ–‡å­—ç¬¦æ—¶é¿å…ä¹±ç ã€‚

```properties
spring.mail.password=
```

- **ä½œç”¨**ï¼šè®¾ç½®é‚®ä»¶è´¦æˆ·çš„å¯†ç ã€‚è¿™é‡Œä¸ºç©ºï¼Œéœ€è¦å¡«å†™ç”¨äº SMTP ç™»å½•çš„å¯†ç ã€‚å¦‚æœæ˜¯ QQ é‚®ç®±ï¼Œéœ€è¦å¡«å†™ QQ é‚®ç®±æˆæƒç ã€‚

```properties
spring.mail.username=
```

- **ä½œç”¨**ï¼šè®¾ç½®å‘é€é‚®ä»¶æ‰€ç”¨çš„é‚®ç®±è´¦æˆ·åã€‚è¿™é‡Œä¸ºç©ºï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦å¡«å†™å¯¹åº”çš„é‚®ç®±åœ°å€ï¼Œå¦‚ `example@qq.com`ã€‚

```properties
spring.mail.port=587
```

- **ä½œç”¨**ï¼šè®¾ç½® SMTP æœåŠ¡å™¨çš„ç«¯å£ã€‚`587` æ˜¯é€šå¸¸ç”¨äºæ”¯æŒåŠ å¯†çš„ SMTP ç«¯å£ï¼Œé€‚ç”¨äºå‘é€é‚®ä»¶æ—¶å¯ç”¨ TLS/SSL å®‰å…¨è¿æ¥ã€‚

```properties
spring.mail.properties.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
```

- **ä½œç”¨**ï¼šæŒ‡å®šç”¨äº SMTP è¿æ¥çš„å®‰å…¨å¥—æ¥å­—å·¥å‚ç±»ã€‚è¿™é‡Œè®¾ç½®ä¸º `javax.net.ssl.SSLSocketFactory`ï¼Œè¡¨ç¤ºé‚®ä»¶è¿æ¥ä¼šä½¿ç”¨ SSLï¼ˆå®‰å…¨å¥—æ¥å­—å±‚ï¼‰è¿›è¡ŒåŠ å¯†ã€‚

```properties
spring.mail.properties.mail.debug=true
```

- **ä½œç”¨**ï¼šå¼€å¯é‚®ä»¶å‘é€çš„è°ƒè¯•æ¨¡å¼ã€‚å¦‚æœè®¾ç½®ä¸º `true`ï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºé‚®ä»¶å‘é€è¿‡ç¨‹ä¸­çš„è°ƒè¯•ä¿¡æ¯ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚

### 3. **RabbitMQ Configuration**

```properties
spring.rabbitmq.username=guest
```

- **ä½œç”¨**ï¼šè®¾ç½®è¿æ¥ RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡çš„ç”¨æˆ·åã€‚è¿™é‡Œä½¿ç”¨é»˜è®¤ç”¨æˆ·å `guest`ã€‚

```properties
spring.rabbitmq.password=guest
```

- **ä½œç”¨**ï¼šè®¾ç½®è¿æ¥ RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡çš„å¯†ç ã€‚è¿™é‡Œä½¿ç”¨é»˜è®¤å¯†ç  `guest`ã€‚

```properties
spring.rabbitmq.host=192.168.91.128
```

- **ä½œç”¨**ï¼šè®¾ç½® RabbitMQ æœåŠ¡å™¨çš„ä¸»æœºåœ°å€ã€‚è¿™é‡ŒæŒ‡å®šäº†ä¸€ä¸ª IP åœ°å€ `192.168.91.128`ï¼Œè¡¨ç¤º RabbitMQ æœåŠ¡å™¨è¿è¡Œåœ¨è¿™ä¸ª IP åœ°å€ä¸Šã€‚

```properties
spring.rabbitmq.port=5672
```

- **ä½œç”¨**ï¼šè®¾ç½® RabbitMQ æœåŠ¡å™¨çš„ç«¯å£å·ã€‚`5672` æ˜¯ RabbitMQ é»˜è®¤çš„ç«¯å£ï¼Œç”¨äº AMQP åè®®é€šä¿¡ã€‚

```properties
spring.rabbitmq.listener.simple.acknowledge-mode=manual
```

- **ä½œç”¨**ï¼šè®¾ç½® RabbitMQ æ¶ˆæ¯ç›‘å¬å™¨çš„ç¡®è®¤æ¨¡å¼ã€‚`manual` è¡¨ç¤ºæ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯å¤„ç†å®Œæˆã€‚æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯è¢«æ¶ˆè´¹è€…æ¶ˆè´¹åï¼Œå¿…é¡»æ˜ç¡®åœ°è¿›è¡Œç¡®è®¤ã€‚

```properties
spring.rabbitmq.listener.simple.prefetch=100
```

- **ä½œç”¨**ï¼šè®¾ç½® RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—çš„é¢„å–æ•°é‡ã€‚`100` è¡¨ç¤ºæ¯æ¬¡æ¶ˆè´¹è€…å¯ä»¥æœ€å¤šä»é˜Ÿåˆ—ä¸­è·å– 100 æ¡æ¶ˆæ¯ï¼Œè¿™æ ·å¯ä»¥æé«˜å¤„ç†æ•ˆç‡ï¼Œä½†è¿‡é«˜çš„æ•°é‡å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨å¢åŠ ã€‚

### 4. **Redis Configuration**

```properties
spring.redis.host=192.168.91.128
```

- **ä½œç”¨**ï¼šè®¾ç½® Redis æœåŠ¡çš„ä¸»æœºåœ°å€ã€‚è¿™é‡ŒæŒ‡å®šäº† Redis æœåŠ¡è¿è¡Œçš„ IP åœ°å€ `192.168.91.128`ã€‚

```properties
spring.redis.port=6379
```

- **ä½œç”¨**ï¼šè®¾ç½® Redis æœåŠ¡çš„ç«¯å£å·ã€‚`6379` æ˜¯ Redis é»˜è®¤çš„ç«¯å£ï¼Œç”¨äºè¿æ¥ Redis æœåŠ¡ã€‚

```properties
spring.redis.password=123
```

- **ä½œç”¨**ï¼šè®¾ç½® Redis è¿æ¥çš„å¯†ç ã€‚è¿™é‡Œé…ç½®äº† `123` ä½œä¸º Redis è¿æ¥çš„å¯†ç ï¼Œå¦‚æœ Redis é…ç½®äº†å¯†ç ä¿æŠ¤ï¼Œåˆ™éœ€è¦å¡«å†™æ­£ç¡®çš„å¯†ç ã€‚

```properties
spring.redis.database=0
```

- **ä½œç”¨**ï¼šè®¾ç½®è¿æ¥çš„ Redis æ•°æ®åº“ç¼–å·ã€‚Redis é»˜è®¤æœ‰ 16 ä¸ªæ•°æ®åº“ï¼Œç¼–å·ä» `0` åˆ° `15`ã€‚è¿™é‡Œè®¾ç½®ä¸º `0`ï¼Œè¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„æ•°æ®åº“ã€‚

------

### æ€»ç»“ï¼š

- **é‚®ä»¶é…ç½®**ï¼šåŒ…æ‹¬ SMTP æœåŠ¡å™¨çš„è¿æ¥ã€é‚®ä»¶å‘é€çš„ç¼–ç ã€ç«¯å£ã€åŠ å¯†æ–¹å¼ç­‰ã€‚
- **RabbitMQ é…ç½®**ï¼šè¿æ¥ RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé…ç½®äº† RabbitMQ çš„ä¸»æœºã€ç«¯å£ã€è®¤è¯ä¿¡æ¯ï¼Œä»¥åŠæ¶ˆæ¯ç¡®è®¤æ¨¡å¼å’Œé¢„å–æ•°é‡ã€‚
- **Redis é…ç½®**ï¼šè¿æ¥ Redis æ•°æ®åº“ï¼Œè®¾ç½®äº†ä¸»æœºã€ç«¯å£ã€å¯†ç å’Œæ•°æ®åº“ç¼–å·ã€‚
- **æœåŠ¡å™¨é…ç½®**ï¼šè®¾ç½®äº†åº”ç”¨çš„ HTTP æœåŠ¡ç«¯å£å·ã€‚

è¿™äº›é…ç½®é¡¹åœ¨å®é™…å¼€å‘ä¸­å¸¸ç”¨äºè¿æ¥å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚é‚®ä»¶æœåŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜æœåŠ¡ç­‰ï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…å®ç°åº”ç”¨çš„åŠŸèƒ½æ¨¡å—ã€‚

# Redis

> PS D:\Program_code_files\SoftWare\Redis-x64-5.0.14.1> .\redis-server.exe redis.windows.conf
> [21224] 24 Feb 08:38:40.693 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
> [21224] 24 Feb 08:38:40.694 # Redis version=5.0.14.1, bits=64, commit=ec77f72d, modified=0, pid=21224, just started
> [21224] 24 Feb 08:38:40.694 # Configuration loaded
>  Redis 5.0.14.1 (ec77f72d/0) 64 bit
>
>  Running in standalone mode
>  Port: 6379
> PID: 21224
> http://redis.io
>
> [21224] 24 Feb 08:38:40.698 # Server initialized
> [21224] 24 Feb 08:38:40.698 * Ready to accept connections

## Redisçš„ç®€å•ä½¿ç”¨

####  é€šè¿‡ redis-cli.exe è¿æ¥ Redis æœåŠ¡å¹¶æµ‹è¯•

åœ¨ä»»æ„è·¯å¾„å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿æ¥ Redis æœåŠ¡ï¼š

```nginx
redis-cli.exe -h 127.0.0.1 -p 6379
# æˆ–ç›´æ¥ä½¿ç”¨
redis-cli
# æµ‹è¯•ç»“æœï¼š
F:\Redis-x64-5.0.14.1>redis-cli
127.0.0.1:6379> ping
PONG
127.0.0.1:6379>
# ping è¿”å›ç»“æœ PONG è§†ä¸ºæˆåŠŸè¿æ¥
```

Redis é»˜è®¤æ‹¥æœ‰ 16 ä¸ªæ•°æ®åº“ï¼Œåˆå§‹é»˜è®¤ä½¿ç”¨ 0 å·åº“ï¼Œåœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡ select å‘½ä»¤å°†æ•°æ®åº“åˆ‡æ¢åˆ° 8 å·æ•°æ®åº“ï¼š

```nginx
#åˆ‡æ¢åˆ° 8 å·åº“
127.0.0.1:6379> select 8
OK
127.0.0.1:6379[8]>
```

è®¾ç½®é”®å€¼å¯¹å¹¶æŸ¥è¯¢ï¼Œä»¥åŠæ‰‹åŠ¨å…³é—­ Redis æœåŠ¡ï¼š

```nginx
# è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹
127.0.0.1:6379[8]> set first_key first_value
OK
# æ ¹æ®é”®æŸ¥è¯¢å¯¹åº”çš„å€¼
127.0.0.1:6379[8]> get first_key
"first_value"
# æ‰‹åŠ¨å…³é—­ Redis æœåŠ¡
127.0.0.1:6379[8]> shutdown
not connected>
```

å‘½ä»¤è¡Œä¸­ï¼Œå•å‡» Esc é”®ï¼Œé€€å‡ºå½“å‰è¿æ¥çš„ Redis æ•°æ®åº“ã€‚

å¦‚ä½•åœ¨æœ‰å¯†ç çš„æƒ…å†µä¸‹ç™»å½•

```nginx
ç›´æ¥è¾“å…¥å¯†ç 
redis-cli -p 6379 -a 040Heart1611
#å…ˆè¿›å…¥å†è¾“å…¥å¯†ç 
redis-cli 
auth 0408Heart1611
```



# RabbitMQ

è¦ä½¿ç”¨ **çŸ­èŠ‚ç‚¹åç§°**ï¼ˆshort node nameï¼‰ï¼Œä½ éœ€è¦ç¡®ä¿åœ¨é…ç½®å’Œå¯åŠ¨ RabbitMQ èŠ‚ç‚¹æ—¶ä½¿ç”¨ `-sname` è€Œä¸æ˜¯ `-name`ï¼Œä»¥åŠç¡®ä¿åœ¨ç›¸å…³é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨çŸ­èŠ‚ç‚¹åç§°ã€‚çŸ­èŠ‚ç‚¹åç§°åªåŒ…å«è®¡ç®—æœºçš„åå­—ï¼ˆä¾‹å¦‚ `rabbit@localhost` æˆ– `rabbit@<hostname>`ï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®Œæ•´çš„ä¸»æœºåã€‚

### é…ç½®æ­¥éª¤ï¼š

#### 1. **é…ç½® RabbitMQ èŠ‚ç‚¹åç§°ä¸ºçŸ­åç§°**

åœ¨ RabbitMQ é…ç½®ä¸­ï¼ŒèŠ‚ç‚¹åç§°é€šå¸¸ç”± `rabbitmq.conf` æ–‡ä»¶æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQ ä¼šå°è¯•ä½¿ç”¨ `-name` å¯åŠ¨ï¼Œå¦‚æœä½ æƒ³åˆ‡æ¢åˆ°çŸ­åç§°ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œã€‚

##### ä¿®æ”¹ `rabbitmq.conf` é…ç½®æ–‡ä»¶ï¼š

1. æ‰¾åˆ°æˆ–åˆ›å»º RabbitMQ é…ç½®æ–‡ä»¶ `rabbitmq.conf`ã€‚é€šå¸¸è¯¥æ–‡ä»¶ä½äºï¼š

	- **Windows**ï¼š`C:\Program Files\RabbitMQ Server\rabbitmq_server-<version>\etc\rabbitmq\rabbitmq.conf`
	- **Linux**ï¼š`/etc/rabbitmq/rabbitmq.conf`

2. åœ¨ `rabbitmq.conf` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

	```properties
	# ä½¿ç”¨çŸ­èŠ‚ç‚¹åç§°
	node.name = rabbit@localhost
	```

	æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ çš„è®¡ç®—æœºåï¼Œç¡®ä¿å®ƒæ˜¯çŸ­èŠ‚ç‚¹åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¡ç®—æœºåæ˜¯ `mycomputer`ï¼Œä½ å¯ä»¥å°†é…ç½®æ”¹ä¸ºï¼š

	```properties
	node.name = rabbit@mycomputer
	```

3. **é‡å¯ RabbitMQ æœåŠ¡**ï¼š é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œæˆåï¼Œé‡å¯ RabbitMQ æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆã€‚

	- Windows

		ï¼šä½¿ç”¨å‘½ä»¤ï¼š

		```bash
		rabbitmqctl stop
		rabbitmqctl start
		```

	- Linux

		ï¼š

		```bash
		sudo systemctl restart rabbitmq-server
		```

#### 2. **é…ç½® Erlang ç¯å¢ƒå˜é‡ä¸ºçŸ­åç§°**

å¦‚æœä½ åœ¨ä½¿ç”¨ Erlang CLI å·¥å…·ï¼Œä¹Ÿéœ€è¦ç¡®ä¿ Erlang ä½¿ç”¨çŸ­åç§°ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡æ¥å®ç°ã€‚

##### ä¿®æ”¹ Erlang ç¯å¢ƒå˜é‡ï¼š

1. **Windows**ï¼šä½ éœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡æ¥ç¡®ä¿ Erlang ä½¿ç”¨çŸ­èŠ‚ç‚¹åç§°ã€‚åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½® `ERLANG_NODE` å˜é‡ï¼š

	- æ‰“å¼€â€œç³»ç»Ÿå±æ€§â€ > â€œé«˜çº§â€ > â€œç¯å¢ƒå˜é‡â€
	- åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ æˆ–ä¿®æ”¹ `ERLANG_NODE` å˜é‡ï¼Œå€¼è®¾ç½®ä¸º `rabbit@localhost`ï¼ˆæˆ–ä½¿ç”¨ä½ çš„è®¡ç®—æœºåï¼‰ã€‚

2. **Linux/MacOS**ï¼šä¿®æ”¹ `~/.bashrc` æˆ– `~/.bash_profile` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œï¼š

	```bash
	export ERLANG_NODE=rabbit@localhost
	```

3. ç„¶åé‡æ–°åŠ è½½æ–‡ä»¶ï¼š

	```bash
	source ~/.bashrc  # æˆ– source ~/.bash_profile
	```

#### 3. **ä½¿ç”¨ RabbitMQ CLI å·¥å…·æ—¶åŠ  `--shortnames` å‚æ•°**

å¦‚æœä½ åœ¨ä½¿ç”¨ `rabbitmqctl` æˆ–å…¶ä»– RabbitMQ CLI å·¥å…·æ—¶é‡åˆ°èŠ‚ç‚¹åç§°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ `--shortnames` å‚æ•°ï¼Œä¾‹å¦‚ï¼š

```bash
rabbitmqctl --shortnames status
```

### æ³¨æ„äº‹é¡¹ï¼š

- **çŸ­èŠ‚ç‚¹åç§°é™åˆ¶**ï¼šçŸ­èŠ‚ç‚¹åç§°åªæœ‰è®¡ç®—æœºåï¼Œæ²¡æœ‰åŸŸåã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„æœºå™¨åæ˜¯ `localhost`ï¼Œå¹¶ä¸”ä½ å°† RabbitMQ é…ç½®ä¸ºä½¿ç”¨ `rabbit@localhost`ï¼Œåœ¨æŸäº›ç¯å¢ƒä¸‹ï¼ˆå°¤å…¶æ˜¯æ¶‰åŠåˆ°åˆ†å¸ƒå¼é›†ç¾¤æ—¶ï¼‰ï¼Œå¯èƒ½ä¼šå‘ç”Ÿåç§°è§£æé—®é¢˜ã€‚
- **é•¿èŠ‚ç‚¹åç§°ä¸çŸ­èŠ‚ç‚¹åç§°çš„åŒºåˆ«**ï¼šé•¿èŠ‚ç‚¹åç§°åŒ…æ‹¬å®Œå…¨é™å®šçš„åŸŸåï¼ˆä¾‹å¦‚ `rabbit@mycomputer.local`ï¼‰ï¼Œè€ŒçŸ­èŠ‚ç‚¹åç§°é€šå¸¸ä»…åŒ…å«ä¸»æœºåï¼ˆä¾‹å¦‚ `rabbit@mycomputer` æˆ– `rabbit@localhost`ï¼‰ã€‚

### æ€»ç»“ï¼š

1. åœ¨ `rabbitmq.conf` é…ç½®æ–‡ä»¶ä¸­å°† `node.name` è®¾ç½®ä¸ºçŸ­åç§°ï¼ˆå¦‚ `rabbit@localhost` æˆ– `rabbit@<hostname>`ï¼‰ã€‚
2. ç¡®ä¿ Erlang ç¯å¢ƒå˜é‡ `ERLANG_NODE` ä½¿ç”¨çŸ­èŠ‚ç‚¹åç§°ã€‚
3. é‡å¯ RabbitMQ æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆã€‚
4. åœ¨ CLI ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åŠ  `--shortnames` å‚æ•°æ¥ç¡®ä¿ä½¿ç”¨çŸ­åç§°ã€‚

é€šè¿‡è¿™äº›é…ç½®ï¼Œä½ å¯ä»¥ä½¿ RabbitMQ ä½¿ç”¨çŸ­èŠ‚ç‚¹åç§°ã€‚è¿™æ ·é…ç½®åï¼ŒRabbitMQ ä¼šä»¥ä¸»æœºåè€Œä¸æ˜¯å®Œæ•´çš„åŸŸåè¿›è¡ŒèŠ‚ç‚¹é€šä¿¡ï¼Œé€‚åˆäºå±€åŸŸç½‘å†…æ²¡æœ‰åŸŸåè§£æéœ€æ±‚çš„ç®€å•åº”ç”¨åœºæ™¯ã€‚

## æ— æ³•è®¿é—®15672

[RabbitMQå¯åŠ¨æˆåŠŸï¼Œå´æ— æ³•è®¿é—®15672ï¼Ÿ_rabbitmq 15672-CSDNåšå®¢](https://blog.csdn.net/dissplay1/article/details/115193689)

# äºŒæ¬¡å¼€å‘ç¯å¢ƒé…ç½®

é€‰æ‹©nodeç‰ˆæœ¬ä¸º12.xï¼Œè¿è¡Œ`npm install`ä¼šæœ‰æŠ¥é”™

æ‰§è¡Œnpmæä¾›çš„å‘½ä»¤ï¼Œ`npm fix aduit`,è¿è¡Œåæ— æŠ¥é”™å³å¯ï¼Œè­¦å‘Šå¯ä»¥å¿½ç•¥

# é¦–é¡µçš„ä¾§è¾¹èœå•æ è®¾è®¡

## ä½¿ç”¨çš„æ–¹å¼

ä»£ç éƒ¨åˆ†ï¼š

```vue
<el-aside width="200px">
                    <el-menu router unique-opened>
                        <el-submenu :index="index+''" v-for="(item,index) in routes" v-if="!item.hidden" :key="index">
                            <template slot="title">
                                <i style="color: #409eff;margin-right: 5px" :class="item.iconCls"></i>
                                <span>{{item.name}}</span>
                            </template>
                            <el-menu-item :index="child.path" v-for="(child,indexj) in item.children" :key="indexj">
                                {{child.name}}
                            </el-menu-item>
                        </el-submenu>
                    </el-menu>
                </el-aside>
```

è§£é‡Šï¼š

> è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨ **Element UI** ç»„ä»¶åº“çš„ Vue.js ä»£ç ï¼Œä¸»è¦ç”¨äºæ„å»ºä¸€ä¸ªä¾§è¾¹æ èœå•ï¼ˆ`<el-aside>`ï¼‰å’ŒåŠ¨æ€ç”Ÿæˆçš„å­èœå•ï¼ˆ`<el-submenu>`ï¼‰ã€‚å®ƒåˆ©ç”¨äº† Vue çš„æŒ‡ä»¤ã€æ¡ä»¶æ¸²æŸ“å’Œ `v-for` æ¥å¾ªç¯ç”Ÿæˆè·¯ç”±çš„èœå•é¡¹ã€‚æˆ‘ä»¬æ¥é€è¡Œåˆ†æä»£ç ï¼š
>
> ### 1. **`<el-aside width="200px">`**
>
> è¿™æ˜¯ Element UI ä¸­çš„ä¾§è¾¹æ ç»„ä»¶ï¼Œ`<el-aside>` ç”¨äºåˆ›å»ºä¸€ä¸ªä¾§è¾¹æ ï¼Œ`width="200px"` è®¾ç½®ä¾§è¾¹æ çš„å®½åº¦ä¸º 200pxã€‚
>
> ### 2. **`<el-menu router unique-opened>`**
>
> è¿™æ˜¯ Element UI çš„èœå•ç»„ä»¶ï¼ˆ`<el-menu>`ï¼‰ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªèœå•åˆ—è¡¨ã€‚è¿™é‡Œä¼ å…¥äº†ä¸¤ä¸ªå±æ€§ï¼š
>
> - `router`ï¼šè¡¨ç¤ºèœå•é¡¹ä¼šæ ¹æ® Vue Router çš„è·¯ç”±æ¥è¿›è¡Œå¯¼èˆªã€‚å½“ç‚¹å‡»èœå•é¡¹æ—¶ï¼Œä¼šè§¦å‘è·¯ç”±è·³è½¬ã€‚
> - `unique-opened`ï¼šå½“å¯ç”¨è¯¥å±æ€§æ—¶ï¼Œåªæœ‰ä¸€ä¸ªå­èœå•ä¼šè¢«å±•å¼€ï¼Œç‚¹å‡»å…¶ä»–å­èœå•æ—¶ï¼Œå½“å‰å±•å¼€çš„å­èœå•ä¼šæ”¶èµ·ã€‚
>
> ### 3. **`<el-submenu :index="index+''" v-for="(item,index) in routes" v-if="!item.hidden" :key="index">`**
>
> `<el-submenu>` æ˜¯èœå•é¡¹çš„å­èœå•ï¼Œè¡¨ç¤ºä¸€ä¸ªå¯ä»¥æŠ˜å çš„èœå•é¡¹ã€‚è¿™é‡Œä½¿ç”¨äº† `v-for` æŒ‡ä»¤æ¥å¾ªç¯éå† `routes` æ•°ç»„å¹¶ç”Ÿæˆå¤šä¸ª `<el-submenu>`ã€‚å…·ä½“å±æ€§ï¼š
>
> - `:index="index+''"`ï¼š`index` æ˜¯å½“å‰å¾ªç¯çš„ç´¢å¼•ï¼Œ`+''` å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½œä¸º `el-submenu` çš„ç´¢å¼•ï¼ˆç”¨äºæ ‡è¯†å­èœå•ï¼‰ã€‚
> - `v-for="(item, index) in routes"`ï¼šé€šè¿‡ `v-for` éå† `routes` æ•°ç»„ï¼Œ`item` æ˜¯å½“å‰é¡¹ï¼Œ`index` æ˜¯ç´¢å¼•ã€‚
> - `v-if="!item.hidden"`ï¼š`v-if` ç”¨äºæ¡ä»¶æ¸²æŸ“ï¼Œåªæœ‰å½“ `item.hidden` ä¸º `false` æ—¶ï¼Œè¿™ä¸ªå­èœå•æ‰ä¼šæ˜¾ç¤ºã€‚`item.hidden` æ˜¯æ§åˆ¶èœå•æ˜¯å¦æ˜¾ç¤ºçš„å­—æ®µã€‚
> - `:key="index"`ï¼šVue æ¨èç»™æ¯ä¸ª `v-for` éå†çš„å…ƒç´ æ·»åŠ å”¯ä¸€çš„ `key` å±æ€§ï¼Œä½¿ç”¨ `index` ä½œä¸º `key`ã€‚
>
> ### 4. **`<template slot="title">`**
>
> `<template slot="title">` æ˜¯ Vue çš„æ’æ§½ï¼ˆslotï¼‰è¯­æ³•ï¼Œå®ƒç”¨äºå®šä¹‰å­èœå•çš„æ ‡é¢˜éƒ¨åˆ†ã€‚å…·ä½“æ¥è¯´ï¼Œ`el-submenu` ç»„ä»¶çš„æ ‡é¢˜å†…å®¹é€šè¿‡ `slot="title"` æ’å…¥ã€‚è¿™ä¸€éƒ¨åˆ†åŒ…å«äº†ä¸¤ä¸ªå†…å®¹ï¼š
>
> - ä¸€ä¸ª `i` å…ƒç´ ï¼Œç”¨æ¥æ˜¾ç¤ºå›¾æ ‡ã€‚`i` å…ƒç´ çš„ `:class="item.iconCls"` ç»‘å®šäº†å›¾æ ‡çš„ CSS ç±»ï¼Œ`item.iconCls` æ˜¯æ¯ä¸ªèœå•é¡¹çš„å›¾æ ‡ç±»åã€‚`style="color: #409eff; margin-right: 5px"` æ˜¯å†…è”æ ·å¼ï¼Œè®¾ç½®äº†å›¾æ ‡é¢œè‰²å’Œå³è¾¹è·ã€‚
> - ä¸€ä¸ª `span` å…ƒç´ ï¼Œç”¨æ¥æ˜¾ç¤ºèœå•é¡¹çš„åç§°ï¼š`{{item.name}}`ã€‚
>
> ### 5. **`<el-menu-item :index="child.path" v-for="(child, indexj) in item.children" :key="indexj">`**
>
> è¿™æ˜¯æ¯ä¸ªå­èœå•é¡¹ï¼ˆ`<el-menu-item>`ï¼‰ï¼Œåœ¨ `<el-submenu>` å†…éƒ¨å¾ªç¯æ¸²æŸ“ã€‚`v-for` ç”¨äºéå† `item.children` æ•°ç»„ï¼Œå¹¶ç”Ÿæˆå¤šä¸ªèœå•é¡¹ï¼š
>
> - `:index="child.path"`ï¼šè¿™é‡Œå°†å­èœå•é¡¹çš„ `path` å±æ€§ä½œä¸ºèœå•é¡¹çš„ `index`ï¼Œè¿™é€šå¸¸æ˜¯ç”¨äº Vue Router å¯¼èˆªçš„è·¯å¾„ã€‚
> - `v-for="(child, indexj) in item.children"`ï¼šé€šè¿‡ `v-for` éå† `item.children`ï¼Œæ¯ä¸ª `item` æ˜¯ä¸€ä¸ªçˆ¶èœå•é¡¹ï¼Œ`children` æ˜¯å®ƒçš„å­èœå•é¡¹æ•°ç»„ã€‚
> - `:key="indexj"`ï¼šä½¿ç”¨ `indexj` ä½œä¸º `key`ï¼Œç¡®ä¿æ¯ä¸ªèœå•é¡¹æ˜¯å”¯ä¸€çš„ã€‚
> - `{{child.name}}`ï¼šæ˜¾ç¤ºå­èœå•é¡¹çš„åç§°ã€‚
>
> ### æ€»ç»“ï¼š
>
> è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯åŠ¨æ€æ¸²æŸ“ä¸€ä¸ªä¾§è¾¹æ èœå•ï¼ˆ`<el-aside>`ï¼‰ï¼Œè¯¥èœå•é€šè¿‡ Vue Router å®ç°é¡µé¢å¯¼èˆªã€‚æ¯ä¸ªèœå•é¡¹æ ¹æ® `routes` æ•°ç»„çš„æ•°æ®åŠ¨æ€ç”Ÿæˆï¼Œå¹¶ä¸”å¦‚æœæœ‰å­èœå•ï¼ˆé€šè¿‡ `item.children`ï¼‰ï¼Œåˆ™ä¼šç”ŸæˆæŠ˜å èœå•ï¼ˆ`<el-submenu>`ï¼‰ã€‚å­èœå•é¡¹çš„å†…å®¹å’Œå›¾æ ‡é€šè¿‡æ•°ç»„ä¸­çš„æ•°æ®æ¥æ§åˆ¶ã€‚

## æŒ‰é’®è¯­æ³•

```vue
<el-button type="primary" @click="yourMethod">æŒ‰é’®æ–‡æœ¬</el-button>
```

å®šä¹‰JavaScriptæ–¹æ³•

```javascript
methods: {
    // é‡ç½®æœç´¢æ–¹æ³•
    resetSearch() {
        this.keyword = ''; // æ¸…ç©ºæœç´¢æ¡†
        this.searchValue = {  // æ¸…ç©ºé«˜çº§æœç´¢æ¡ä»¶
            politicId: null,
            nationId: null,
            jobLevelId: null,
            posId: null,
            engageForm: null,
            departmentId: null,
            beginDateScope: null
        };
        this.initEmps(); // é‡ç½®æœç´¢åé‡æ–°åŠ è½½æ•°æ®
    },
    // å…¶ä»–å·²æœ‰æ–¹æ³•...
}

```

# äºŒæ¬¡å¼€å‘

## æ¡Œé¢å…ƒç´ çš„æ­å»º

```vue
<template>//å®šä¹‰UIç•Œé¢çš„ç»„ä»¶çš„
<div>//æ ‡ç­¾
<el-input></el-input>//è¾“å…¥æ¡†ç»„ä»¶ï¼ŒElementUIåº“
<el-button></el-button>//æŒ‰é’®ç»„ä»¶
<el-upload></el-upload>//æ–‡ä»¶ä¸Šä¼ çš„æ ‡ç­¾,ä¸buttonè”åˆä½¿ç”¨
    <transition></transition>//æ·»åŠ è¿‡æ¸¡åŠ¨ç”»çš„æ•ˆæœæ ‡ç­¾
 <el-row>//è¡Œ
  <el-col :span="8">åˆ—1</el-col>//åˆ—
  <el-col :span="8">åˆ—2</el-col>
  <el-col :span="8">åˆ—3</el-col>
</el-row>
<el-popover>// æ˜¯ Element UI ä¸­çš„ä¸€ä¸ªå¼¹å‡ºæ¡†ç»„ä»¶ï¼Œé€šå¸¸ç”¨äºæ˜¾ç¤ºæç¤ºã€èœå•ã€å¸®åŠ©ä¿¡æ¯ç­‰å†…å®¹ï¼Œç±»ä¼¼äºä¸€ä¸ªæµ®åŠ¨çš„å¼¹å‡ºå±‚ã€‚å®ƒå…è®¸ä½ åœ¨ç”¨æˆ·äº¤äº’æ—¶å¼¹å‡ºé¢å¤–çš„ä¿¡æ¯æˆ–é€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»ã€æ‚¬åœç­‰è§¦å‘æ–¹å¼æ˜¾ç¤ºã€‚
```

### `el-upload`è¯­æ³•

> **``**
>
> - `:show-file-list="false"`ï¼šè®¾ç½®ä¸º `false`ï¼Œè¡¨ç¤ºä¸Šä¼ æ–‡ä»¶åï¼Œä¸ä¼šæ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ã€‚å¦‚æœä½ å¸Œæœ›æ˜¾ç¤ºä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¯ä»¥å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º `true`ã€‚
> - `:before-upload="beforeUpload"`ï¼šåœ¨ä¸Šä¼ æ–‡ä»¶ä¹‹å‰æ‰§è¡Œ `beforeUpload` æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¯ä»¥ç”¨äºæ£€æŸ¥æ–‡ä»¶çš„åˆæ³•æ€§ã€é™åˆ¶ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹æˆ–å¤§å°ç­‰ã€‚
> - `:on-success="onSuccess"`ï¼šä¸Šä¼ æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œå½“æ–‡ä»¶ä¸Šä¼ æˆåŠŸæ—¶è§¦å‘ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚
> - `:on-error="onError"`ï¼šä¸Šä¼ å¤±è´¥åçš„å›è°ƒå‡½æ•°ï¼Œå½“æ–‡ä»¶ä¸Šä¼ å¤±è´¥æ—¶è§¦å‘ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†é”™è¯¯æƒ…å†µã€‚
> - `:disabled="importDataDisabled"`ï¼šå¦‚æœ `importDataDisabled` ä¸º `true`ï¼Œåˆ™ä¸Šä¼ æŒ‰é’®ä¼šè¢«ç¦ç”¨ã€‚é€šå¸¸ç”¨äºæ§åˆ¶ä¸Šä¼ æŒ‰é’®çš„å¯ç”¨æ€§ï¼ŒåŸºäºæŸäº›æ¡ä»¶æ¥ç¦ç”¨æˆ–å¯ç”¨æŒ‰é’®ã€‚
> - `style="display: inline-flex;margin-right: 8px"`ï¼šé€šè¿‡å†…è”æ ·å¼æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºæ–¹å¼ï¼Œè¿™é‡Œæ˜¯è®©ä¸Šä¼ æŒ‰é’®å’Œå…¶å®ƒå…ƒç´ å¹¶æ’æ˜¾ç¤ºï¼Œå¹¶è®¾ç½®å³è¾¹è·ã€‚
> - `action="/employee/basic/import"`ï¼šä¸Šä¼ è¯·æ±‚çš„ç›®æ ‡åœ°å€ï¼Œå³æ–‡ä»¶ä¸Šä¼ çš„æ¥å£ URLã€‚

### divè¯­æ³•

> <div v-show="showAdvanceSearchView"></div>
>
>- `v-show="showAdvanceSearchView"`ï¼šè¿™ä¸ªæŒ‡ä»¤æ§åˆ¶è¯¥ `<div>` å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—ã€‚`showAdvanceSearchView` æ˜¯ Vue æ•°æ®ä¸­çš„ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœå®ƒä¸º `true`ï¼Œåˆ™æ˜¾ç¤ºè¯¥æœç´¢æ¡†ï¼Œå¦åˆ™éšè—ã€‚

## å¼•å…¥å®Œæ•´çš„elementâ€“ui

```javascript
Vue.use(elementui);
```



# èµ„æ–™ç®¡ç†ç•Œé¢çš„è®¾è®¡

## æ·»åŠ é¡¹ç›®é€‰é¡¹å¡

`Hone.vue`è¿›è¡Œèœå•çš„åˆ›å»º

`Menu.js`ç¡®å®šè·¯å¾„ï¼ˆåœ¨utilsæ–‡ä»¶å¤¹ä¸­ï¼‰

> æ¨¡ä»¿åŸºç¡€çš„äººå‘˜ä¿¡æ¯ç®¡ç†ç•Œé¢

## æœåŠ¡ç«¯é€»è¾‘

> ç¼–å†™æ§åˆ¶å±‚
>
> ç¼–å†™æœåŠ¡å±‚
>
> ç¼–å†™æ•°æ®è®¿é—®å±‚
>
> 

è¡¨æ ¼è®¾è®¡

å¦‚æœä½ åªæƒ³ **å­˜å‚¨æ—¥æœŸ**ï¼Œä¸åŒ…æ‹¬æ—¶é—´ï¼Œéœ€è¦å°† `create_time` å’Œ `update_time` å­—æ®µçš„æ•°æ®ç±»å‹ä» `TIMESTAMP` æ”¹ä¸º `DATE`ã€‚ä¿®æ”¹åçš„ SQL è¯­å¥å¦‚ä¸‹ï¼š

------

##  **ä¿®æ”¹åçš„è¡¨ç»“æ„**

```sql
CREATE TABLE GasDates_info (
    id            BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'æ–‡ä»¶è®°å½•çš„å”¯ä¸€ID',
    unique_name   VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶çš„å”¯ä¸€åç§°ï¼ˆUUIDï¼‰',
    original_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶çš„çœŸå®åç§°ï¼ˆç”¨æˆ·ä¸Šä¼ æ—¶çš„åç§°ï¼‰',
    upload_date   DATE NOT NULL COMMENT 'æ–‡ä»¶ä¸Šä¼ æ—¥æœŸ',
    file_path     VARCHAR(500) NOT NULL COMMENT 'æ–‡ä»¶ä¿å­˜è·¯å¾„',
    file_extension VARCHAR(50) NOT NULL COMMENT 'æ–‡ä»¶åç¼€ï¼ˆç±»å‹ï¼‰',
    uploader_id   BIGINT NOT NULL COMMENT 'ä¸Šä¼ è€…ID',
    create_date   DATE DEFAULT (CURRENT_DATE) COMMENT 'è®°å½•åˆ›å»ºæ—¥æœŸ',
    update_date   DATE DEFAULT (CURRENT_DATE) COMMENT 'è®°å½•æ›´æ–°æ—¥æœŸ',
    INDEX idx_unique_name (unique_name),
    INDEX idx_upload_date (upload_date),
    INDEX idx_uploader_id (uploader_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å­˜å‚¨ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯çš„è¡¨';
```

------

## **ğŸ“ å…³é”®ä¿®æ”¹**

### **1ï¸âƒ£ `create_date DATE DEFAULT (CURRENT_DATE) COMMENT 'è®°å½•åˆ›å»ºæ—¥æœŸ'`**

- **æ•°æ®ç±»å‹æ”¹ä¸º `DATE`**ï¼šåªå­˜å‚¨ `YYYY-MM-DD` æ ¼å¼ï¼Œä¸åŒ…å«æ—¶é—´ã€‚
- **`DEFAULT (CURRENT_DATE)`**ï¼šæ–°æ’å…¥æ•°æ®æ—¶ï¼Œé»˜è®¤å¡«å…… **å½“å¤©çš„æ—¥æœŸ**ã€‚

### **2ï¸âƒ£ `update_date DATE DEFAULT (CURRENT_DATE) COMMENT 'è®°å½•æ›´æ–°æ—¥æœŸ'`**

- **æ•°æ®ç±»å‹æ”¹ä¸º `DATE`**ï¼šä¸å­˜æ—¶é—´éƒ¨åˆ†ã€‚
- **é»˜è®¤å€¼ `CURRENT_DATE`**ï¼šè®°å½•åˆ›å»ºæ—¶ï¼Œé»˜è®¤å­˜å‚¨å½“å¤©çš„æ—¥æœŸã€‚
- âš  **æ›´æ–°æ—¶ `update_date` ä¸ä¼šè‡ªåŠ¨æ›´æ–°**ï¼Œå¦‚æœéœ€è¦åœ¨æ•°æ®æ›´æ–°æ—¶åŒæ­¥ä¿®æ”¹ `update_date`ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨ `UPDATE` è¯­å¥ä¸­å¤„ç†ã€‚

------

## **ğŸ“Œ ç¤ºä¾‹æ•°æ®**

### **æ’å…¥æ•°æ®**

```sql
INSERT INTO GasDates_info (unique_name, original_name, upload_date, file_path, file_extension, uploader_id)
VALUES ('abc123xyz', 'test.png', '2025-03-03', '/uploads/abc123xyz.png', 'png', 1001);
```

ğŸ“Œ `create_date` å’Œ `update_date` ä¼šè‡ªåŠ¨å¡«å……å½“å¤©æ—¥æœŸã€‚

------

### **æ›´æ–°æ•°æ®æ—¶ï¼Œæ‰‹åŠ¨æ›´æ–° `update_date`**

```sql
UPDATE gas_date_info
SET file_path = '/uploads/new_path.png',
    update_date = CURRENT_DATE
WHERE id = 1;
```

ğŸ”¹ `update_date` å¿…é¡»æ‰‹åŠ¨æ›´æ–°ï¼Œå› ä¸º `DATE` ç±»å‹ä¸æ”¯æŒ `ON UPDATE CURRENT_TIMESTAMP` è¿™æ ·çš„è‡ªåŠ¨æ›´æ–°ã€‚

------

## **ğŸ¯ ç»“è®º**

âœ” **ä¿®æ”¹ `TIMESTAMP` ä¸º `DATE`ï¼Œä»…å­˜å‚¨æ—¥æœŸ** ğŸ“…
 âœ” **`create_date` é»˜è®¤å¡«å……å½“å¤©æ—¥æœŸ** ğŸ•˜
 âœ” **`update_date` éœ€è¦æ‰‹åŠ¨æ›´æ–°** âœ
 âœ” **æŸ¥è¯¢æ—¶å¯ä»¥æŒ‰æ—¥æœŸè¿‡æ»¤** ğŸ”

è¿™æ ·ï¼Œä½ çš„ `gas_date_info` è¡¨å°±åªå­˜å‚¨ `YYYY-MM-DD` æ ¼å¼çš„æ—¥æœŸï¼Œè€Œä¸åŒ…å«å…·ä½“æ—¶é—´äº†ï¼ğŸš€

#  **initEmpså‡½æ•°çš„è§£æ**

## ğŸŒŸä¸»è¦ä½œç”¨

> å‘é€HTTPè¯·æ±‚åˆ°åç«¯/employee/basic/,è·å–å‘˜å·¥åˆ—è¡¨
>
> æ”¯æŒæ™®é€šä¸é«˜çº§æŸ¥è¯¢
>
> æŸ¥è¯¢ç»“æœå­˜å…¥empså˜é‡ï¼Œå¹¶æ›´æ–°totalæ€»æ•°æ®æ¡æ•°
>
> å¯æ§åˆ¶loadingå˜é‡ï¼Œåœ¨åŠ è½½æ•°æ®æ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

## è¿è¡ŒåŸç†

1. è®¾å®šlading=trueï¼Œè¡¨ç¤ºæ•°æ®æ­£åœ¨åŠ è½½

2. æ„é€ è¯·æ±‚URL

	> let url = â€˜/employee/basic/?page=â€™+this.page+â€˜&sizeâ€™+this.size;

- ä½œç”¨ï¼šåˆ›å»ºåŸºç¡€çš„APIè¯·æ±‚URLï¼Œé»˜è®¤åŒ…å«åˆ†é¡µå‚æ•°ï¼š
	-  this.page -> å½“å‰é¡µç 
	- this.siz -> æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°

3. æ£€æŸ¥æ˜¯å¦æ˜¯é«˜çº§æŸ¥è¯¢
4. æ‹¼æ¥é«˜çº§æŸ¥è¯¢å‚æ•°

> if (this.searchValue.politicId) {
>   url += '&politicId=' + this.searchValue.politicId;
> }

- å¦‚æœ `this.searchValue.politicId` å­˜åœ¨ï¼Œåˆ™æŠŠå®ƒåŠ åˆ° URL é‡Œ

	> æœ€ç»ˆçš„URLçš„æ¨¡æ ·
	>
	> /employee/basic/?page=1&size=10&politicId=3&nationId=5

5. æ™®é€šæŸ¥è¯¢

	> else {
	>   url += "&name=" + this.keyword;
	> }

- å¦‚æœä¸æ˜¯é«˜çº§æŸ¥è¯¢ï¼ˆæ™®é€šæŸ¥è¯¢ï¼‰ï¼Œå°±ç”¨â€˜keywordâ€™æœç´¢å‘˜å·¥

- ç”Ÿæˆçš„URLå¯èƒ½æ˜¯ï¼š

	> /employee/basic/?page=1&size=10&name=å¼ ä¸‰

6. å‘é€è¯·æ±‚

	> this.getRequest(url).then(resp => {

	- this.getRequest(url):è°ƒç”¨getRequestæ–¹æ³•ï¼Œå‘ååç«¯è¯·æ±‚æ•°æ®

7. å¤„ç†å“åº”æ•°æ®

	> this.loading = false;
	> if (resp) {
	>   this.emps = resp.data;
	>   this.total = resp.total;
	> }

	- è¯·æ±‚å®Œæˆåï¼Œloadingå˜æˆfalse
	- å¦‚æœæœ‰è¿”å›æ•°æ®åˆ™

> - `this.emps = resp.data` æŠŠå‘˜å·¥æ•°æ®å­˜å…¥ `emps`
>
> - `this.total = resp.total` è®°å½•æ€»æ•°æ®æ¡æ•°

# æœåŠ¡å™¨åç«¯å¦‚ä½•å“åº”è¯·æ±‚

> åœ¨Spring Bootåç«¯ä¸­ï¼Œå¯¹åº”çš„æ¥å£ä¸€èˆ¬æ˜¯ä¸€ä¸ªå¸¦æœ‰æŸ¥è¯¢å‚æ•°çš„`@GetMapping`æ–¹æ³•ï¼Œä½¿ç”¨Spring MVCçš„`@RequestParam`æ¥æ¥æ”¶å‰ç«¯ä¼ é€’çš„å‚æ•°ã€‚

## åç«¯æ¥å£ç¤ºä¾‹

```java
@RestController
@RequestMapping("/employee/basic")
public class EmployeeController {

    @Autowired
    private EmployeeService employeeService;

    @GetMapping("/")
    public ResponseEntity<Map<String, Object>> getEmployees(
            @RequestParam(defaultValue = "1") Integer page,
            @RequestParam(defaultValue = "10") Integer size,
            @RequestParam(required = false) Integer politicId,
            @RequestParam(required = false) Integer nationId,
            @RequestParam(required = false) Integer jobLevelId,
            @RequestParam(required = false) Integer posId,
            @RequestParam(required = false) String engageForm,
            @RequestParam(required = false) Integer departmentId,
            @RequestParam(required = false) String beginDateScope,
            @RequestParam(required = false) String name) {

        PageHelper.startPage(page, size);
        List<Employee> employees = employeeService.getEmployees(politicId, nationId, jobLevelId, posId, engageForm, departmentId, beginDateScope, name);
        PageInfo<Employee> pageInfo = new PageInfo<>(employees);

        Map<String, Object> result = new HashMap<>();
        result.put("data", pageInfo.getList());
        result.put("total", pageInfo.getTotal());

        return ResponseEntity.ok(result);
    }
}

```

## Serviceå±‚

```java
@Service
public class EmployeeService {

    @Autowired
    private EmployeeMapper employeeMapper;

    public List<Employee> getEmployees(Integer politicId, Integer nationId, Integer jobLevelId,
                                       Integer posId, String engageForm, Integer departmentId,
                                       String beginDateScope, String name) {
        return employeeMapper.getEmployees(politicId, nationId, jobLevelId, posId, engageForm, departmentId, beginDateScope, name);
    }
}

```

## MyBatis DAOå±‚

```java
@Mapper
public interface EmployeeMapper {
    List<Employee> getEmployees(@Param("politicId") Integer politicId,
                                @Param("nationId") Integer nationId,
                                @Param("jobLevelId") Integer jobLevelId,
                                @Param("posId") Integer posId,
                                @Param("engageForm") String engageForm,
                                @Param("departmentId") Integer departmentId,
                                @Param("beginDateScope") String beginDateScope,
                                @Param("name") String name);
}

```

## Mapper XML

```java
<select id="getEmployees" resultType="com.example.model.Employee">
    SELECT * FROM employee
    <where>
        <if test="politicId != null"> AND politic_id = #{politicId}</if>
        <if test="nationId != null"> AND nation_id = #{nationId}</if>
        <if test="jobLevelId != null"> AND job_level_id = #{jobLevelId}</if>
        <if test="posId != null"> AND pos_id = #{posId}</if>
        <if test="engageForm != null"> AND engage_form = #{engageForm}</if>
        <if test="departmentId != null"> AND department_id = #{departmentId}</if>
        <if test="beginDateScope != null"> AND begin_date BETWEEN #{beginDateScope}</if>
        <if test="name != null"> AND name LIKE CONCAT('%', #{name}, '%')</if>
    </where>
</select>

```

## åŸç†

### **åŸç†åˆ†æ**

1. **Vue å‰ç«¯**
	- `initEmps(type)` é€šè¿‡ `getRequest(url)` å‘é€ GET è¯·æ±‚ï¼ŒURL å‚æ•°ä¼šæ ¹æ®æœç´¢æ¡ä»¶æ‹¼æ¥åˆ°æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ã€‚
	- `getRequest(url)` ä½¿ç”¨ `axios` å‘é€ HTTP è¯·æ±‚ï¼Œå¹¶è¿”å› `Promise` ä¾› `then()` å¤„ç†ã€‚
	- å“åº”æ•°æ®è¢«èµ‹å€¼åˆ° `this.emps` å’Œ `this.total`ï¼Œç”¨äºæ›´æ–° Vue ç»„ä»¶çš„ç•Œé¢ã€‚
2. **Spring Boot åç«¯**
	- `@RestController` å¤„ç†å‰ç«¯çš„è¯·æ±‚ï¼Œ`@GetMapping("/")` æ˜ å°„ `/employee/basic/`ã€‚
	- é€šè¿‡ `@RequestParam` è·å–æŸ¥è¯¢å‚æ•°ï¼Œå¹¶è°ƒç”¨ `employeeService.getEmployees()` è·å–æ•°æ®ã€‚
	- `PageHelper.startPage(page, size)` å®ç°åˆ†é¡µæŸ¥è¯¢ã€‚
	- `employeeMapper.getEmployees()` é€šè¿‡ MyBatis è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚
	- ç»“æœå°è£…ä¸º `Map<String, Object>`ï¼Œä»¥ JSON æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚
3. **æ•°æ®åº“æŸ¥è¯¢**
	- é€šè¿‡ MyBatis XML é…ç½® `getEmployees` æ–¹æ³•ï¼ŒåŠ¨æ€æ‹¼æ¥ SQL è¯­å¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢ã€‚
	- `where` è¯­å¥é¿å…ç©ºå€¼æŸ¥è¯¢ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚

------

### **æ€»ç»“**

- Vue ç«¯å°è£… `axios` è¯·æ±‚ï¼ŒåŠ¨æ€æ‹¼æ¥ URL å‚æ•°ã€‚
- Spring Boot ç«¯è§£æå‚æ•°å¹¶è°ƒç”¨ Service è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚
- MyBatis åŠ¨æ€ SQL å¤„ç†ç­›é€‰æ¡ä»¶ï¼Œ`PageHelper` è´Ÿè´£åˆ†é¡µæŸ¥è¯¢ã€‚

# æµç¨‹æ¢³ç†

## å‰ç«¯è¯·æ±‚æ•°æ®çš„æ“ä½œ

è°ƒç”¨`initGasDates(Type)`æ–¹æ³•ï¼Œå…¶ä¸­æ ¹æ®`keyword`ã€`seachValue`ç»„æˆè¯·æ±‚é“¾æ¥

è¯·æ±‚é“¾æ¥ä¸­çš„æ•°æ®æš´éœ²åœ¨urlä¸­

åŸºç¡€`url:/gas/basic/`

åŒ…æ‹¬

> ```javascript
> endNum
> beginNum
> originalname
> DateScope
> 
> name
> ```

urlç»„æˆåï¼Œè°ƒç”¨

```javascript
getRequest(url).then(
    resp => {
        this.loading = false;
        if (resp) {
          this.gasdates = resp.data;
          this.total = resp.total;
        }
    });
```

## åç«¯çš„å“åº”

### 1.æ§åˆ¶å±‚

> é¦–å…ˆè°ƒç”¨æ§åˆ¶å±‚
>
> ```java
> @RequestMapping("/gas/basic")
> public class GasBasicController 
> ```

> æ§åˆ¶å±‚ä¸­æ ¹æ®è¯·æ±‚çš„æ–¹æ³•ä¸ºget
>
> åˆ™åŒ¹é…å¯¹åº”çš„å‡½æ•°
>
> ```Java
> @GetMapping("/")
> public RespPageBean getGasDatesByPage(@RequestParam(defaultValue = "1") Integer page,
>                                       @RequestParam(defaultValue = "10") Integer size,
>                                       @RequestParam(required = false) String originalname,
>                                       @RequestParam(required = false)Integer beginNum ,
>                                       @RequestParam(required = false)Integer endNum,
>                                       @RequestParam(required = false)Date[] DateScope) {
>     return gasService.getGasDatesByPage(page, size, originalname,beginNum,endNum,DateScope);
> }
> ```

> è¿™é‡Œè¯´æ˜ï¼Œå…è®¸é™¤äº†pageã€sizeä¹‹å¤–å‡ä¸ºç©º

### 2.æœåŠ¡å±‚

> è°ƒç”¨æœåŠ¡å±‚çš„å‡½æ•°
>
> ```java
> public RespPageBean getGasDatesByPage(Integer page,Integer size, String originalname,Integer beginNum ,Integer endNum, Date[] DateScope){
>     
> ```

> è¯´æ˜ï¼šè™½ç„¶ä¸Šå±‚çš„å‡½æ•°ä¸ä¸€å®šä¼ é€’æ•°æ®ï¼Œä½†æ˜¯å˜é‡å¿…é¡»å…¨éƒ¨ä¼ é€’ï¼Œæœ€ç»ˆçš„å˜é‡æ˜¯å¦æœ‰æ•ˆæœ‰ç”±æŸ¥è¯¢è¯­å¥åˆ¤æ–­

> æœåŠ¡å±‚æ¶‰åŠä¸¤ä¸ªæ•°æ®ï¼Œä¸€ä¸ªæ˜¯æ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°ï¼Œä¸€ä¸ªæ˜¯å…·ä½“çš„é¡µé¢ä¿¡æ¯
>
> æ‰€ä»¥è°ƒç”¨ä¸¤ä¸ªDAOï¼ˆæ•°æ®è®¿é—®å±‚çš„å‡½æ•°ï¼‰
>
> ```java
> //æŒ‰é¡µæ•°æŸ¥è¯¢æ•°æ®
> List<GasDateInfo> data = gasDatesMapper.getGasDatesByPage(page, size,originalname,beginNum,endNum, DateScope);
> //è·å¾—æ€»æ•°
> Long total = gasDatesMapper.getTotal(originalname,beginNum,endNum, DateScope);
> ```

### 3.æ•°æ®è®¿é—®å±‚

> ä½¿ç”¨è™šæ‹Ÿæ¥å£ï¼Œè°ƒç”¨Mybatisä¸­çš„xmlè¯­æ³•æŸ¥è¯¢æ•°æ®
>
> æœåŠ¡å±‚ä¼ é€’äº†æ•°æ®
>
> å°†æ•°æ®åç§°ä¸å‚æ•°åç§°ä¸€ä¸€å¯¹åº”
>
> ```java
> List<GasDateInfo> getGasDatesByPage(@Param("page") Integer page,
>                                     @Param("size") Integer size,
>                                     @Param("originalname") String originalname,
>                                     @Param("beginNum") Integer beginNum,
>                                     @Param("endNum") Integer endNum,
>                                     @Param("DateScope") Date[] DateScope);
> Long getTotal(@Param("originalname") String originalname,
>               @Param("beginNum") Integer beginNum,
>               @Param("endNum") Integer endNum,
>               @Param("DateScope") Date[] DateScope);
> ```

> æ¥å£å‡½æ•°ä¸xmlè¯­å¥ç»‘å®š
>
> ```java
> <select id="getGasDatesByPage" resultMap="BaseResultMap">
>     SELECT * FROM gasdates_info
>     WHERE 1=1
>     <if test="originalname != null and originalname != ''">
>         AND original_name LIKE CONCAT('%', #{originalname}, '%')
>     </if>
>     <if test="beginNum != null">
>         AND id >= #{beginNum}
>     </if>
>     <if test="endNum != null">
>         AND id <= #{endNum}
>     </if>
>     <if test="DateScope != null and DateScope.length == 2">
>         AND upload_date BETWEEN #{DateScope[0]} AND #{DateScope[1]}
>     </if>
>     ORDER BY id ASC
>     LIMIT #{size} OFFSET #{page}
> </select>
> ```

> è¯´æ˜ï¼šselectè¯­å¥ä¸­çš„æŸ¥è¯¢ç»“æ„åªæœ‰åœ¨ç±»ä¸­çš„å˜é‡åä¸è¡¨ä¸­çš„åˆ—åä¸€è‡´æ—¶æ‰ä¼šæœ‰è‡ªåŠ¨åŒ¹é…ï¼Œå¦åˆ™éœ€è¦é€šè¿‡resultMapè¿›è¡Œæ˜ å°„
>
> å…¶ä¸­è¡¨ä¸­çš„å­—æ®µå
>
> | table       | id   | unique_name | original_name | upload_date | file_path | file_extension | uploader_id |
> | ----------- | ---- | ----------- | ------------- | ----------- | --------- | -------------- | ----------- |
> | GasdataInfo | id   | uniqueName  | originalName  | uploadDate  | filePath  | fileExtension  | uploaderId  |
>
>   
>
> 

<span style="color:red">xmlä¸­<>ä¼šè¢«è¯¯è®¤ä¸ºæ‹¬å·ï¼Œå› æ­¤ä½¿ç”¨`<![CDATA[>=]]>` è¡¨ç¤º `>=`ï¼Œ`<![CDATA[<=]]>` è¡¨ç¤º `<=`ï¼Œè¿™æ · XML è§£ææ—¶ä¸ä¼šæŠ¥é”™ã€‚</span>

#### **æ–¹æ³• 2ï¼šä½¿ç”¨è½¬ä¹‰å­—ç¬¦**

```
xmlå¤åˆ¶ç¼–è¾‘<if test="beginNum != null">
    AND id &gt;= #{beginNum}
</if>
<if test="endNum != null">
    AND id &lt;= #{endNum}
</if>
```

**`DateScope.length == 2` å¯èƒ½ä¸æ”¯æŒ** MyBatis `test` è¯­æ³•ä¸æ”¯æŒ `.length`ï¼Œå»ºè®®æ”¹ä¸ºï¼š

```xml
xml


å¤åˆ¶ç¼–è¾‘
<if test="DateScope != null and DateScope.size() == 2">
```

# æ”¹è¿›

## axiosä¸­çš„è¯·æ±‚æ–¹çš„æ”¹è¿›

```js
export const getRequest = (url, params, responseType = "json") => {
    return axios({
        method: "get",
        url: `${base}${url}`, // æ‹¼æ¥å®Œæ•´çš„è¯·æ±‚åœ°å€
        params: params, // get è¯·æ±‚çš„å‚æ•°ï¼Œaxios ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²
        responseType: responseType // å…è®¸ä¼ å…¥ responseType å‚æ•°
    });
};
```

> è¿™æ ·ï¼Œä½ çš„ `getRequest` æ–¹æ³•å°±å¯ä»¥ç”¨äºæ™®é€š GET è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ–‡ä»¶ä¸‹è½½ï¼ˆBlobï¼‰ã€‚
